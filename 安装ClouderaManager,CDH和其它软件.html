<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>安装ClouderaManager,CDH和其它软件</title><link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 40px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 2; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px !important; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 32px; padding-right: 32px; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none 0s ease 0s; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; margin-top: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="mermaid"] svg, [lang="flow"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root { --side-bar-bg-color: #fafafa; --control-text-color: #777; }
html { font-size: 16px; }
body { font-family: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; color: rgb(51, 51, 51); line-height: 1.6; }
#write { max-width: 860px; margin: 0px auto; padding: 30px 30px 100px; }
#write > ul:first-child, #write > ol:first-child { margin-top: 30px; }
a { color: rgb(65, 131, 196); }
h1, h2, h3, h4, h5, h6 { position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text; }
h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor { text-decoration: none; }
h1 tt, h1 code { font-size: inherit; }
h2 tt, h2 code { font-size: inherit; }
h3 tt, h3 code { font-size: inherit; }
h4 tt, h4 code { font-size: inherit; }
h5 tt, h5 code { font-size: inherit; }
h6 tt, h6 code { font-size: inherit; }
h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom: 1px solid rgb(238, 238, 238); }
h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom: 1px solid rgb(238, 238, 238); }
h3 { font-size: 1.5em; line-height: 1.43; }
h4 { font-size: 1.25em; }
h5 { font-size: 1em; }
h6 { font-size: 1em; color: rgb(119, 119, 119); }
p, blockquote, ul, ol, dl, table { margin: 0.8em 0px; }
li > ol, li > ul { margin: 0px; }
hr { height: 2px; padding: 0px; margin: 16px 0px; background-color: rgb(231, 231, 231); border: 0px none; overflow: hidden; box-sizing: content-box; }
li p.first { display: inline-block; }
ul, ol { padding-left: 30px; }
ul:first-child, ol:first-child { margin-top: 0px; }
ul:last-child, ol:last-child { margin-bottom: 0px; }
blockquote { border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119); }
blockquote blockquote { padding-right: 0px; }
table { padding: 0px; word-break: initial; }
table tr { border-top: 1px solid rgb(223, 226, 229); margin: 0px; padding: 0px; }
table tr:nth-child(2n), thead { background-color: rgb(248, 248, 248); }
table tr th { font-weight: bold; border-width: 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: rgb(223, 226, 229); border-right-color: rgb(223, 226, 229); border-left-color: rgb(223, 226, 229); border-image: initial; border-bottom-style: initial; border-bottom-color: initial; margin: 0px; padding: 6px 13px; }
table tr td { border: 1px solid rgb(223, 226, 229); margin: 0px; padding: 6px 13px; }
table tr th:first-child, table tr td:first-child { margin-top: 0px; }
table tr th:last-child, table tr td:last-child { margin-bottom: 0px; }
.CodeMirror-lines { padding-left: 4px; }
.code-tooltip { box-shadow: rgba(0, 28, 36, 0.3) 0px 1px 1px 0px; border-top: 1px solid rgb(238, 242, 242); }
.md-fences, code, tt { border: 1px solid rgb(231, 234, 237); background-color: rgb(248, 248, 248); border-radius: 3px; padding: 2px 4px 0px; font-size: 0.9em; }
code { background-color: rgb(243, 244, 244); padding: 0px 2px; }
.md-fences { margin-bottom: 15px; margin-top: 15px; padding-top: 8px; padding-bottom: 6px; }
.md-task-list-item > input { margin-left: -1.3em; }
@media print {
  html { font-size: 13px; }
  table, pre { break-inside: avoid; }
  pre { overflow-wrap: break-word; }
}
.md-fences { background-color: rgb(248, 248, 248); }
#write pre.md-meta-block { padding: 1rem; font-size: 85%; line-height: 1.45; background-color: rgb(247, 247, 247); border: 0px; border-radius: 3px; color: rgb(119, 119, 119); margin-top: 0px !important; }
.mathjax-block > .code-tooltip { bottom: 0.375rem; }
.md-mathjax-midline { background: rgb(250, 250, 250); }
#write > h3.md-focus::before { left: -1.5625rem; top: 0.375rem; }
#write > h4.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h5.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h6.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
.md-image > .md-meta { border-radius: 3px; padding: 2px 0px 0px 4px; font-size: 0.9em; color: inherit; }
.md-tag { color: rgb(167, 167, 167); opacity: 1; }
.md-toc { margin-top: 20px; padding-bottom: 20px; }
.sidebar-tabs { border-bottom: none; }
#typora-quick-open { border: 1px solid rgb(221, 221, 221); background-color: rgb(248, 248, 248); }
#typora-quick-open-item { background-color: rgb(250, 250, 250); border-color: rgb(254, 254, 254) rgb(229, 229, 229) rgb(229, 229, 229) rgb(238, 238, 238); border-style: solid; border-width: 1px; }
.on-focus-mode blockquote { border-left-color: rgba(85, 85, 85, 0.12); }
header, .context-menu, .megamenu-content, footer { font-family: "Segoe UI", Arial, sans-serif; }
.file-node-content:hover .file-node-icon, .file-node-content:hover .file-node-open-state { visibility: visible; }
.mac-seamless-mode #typora-sidebar { background-color: var(--side-bar-bg-color); }
.md-lang { color: rgb(180, 101, 77); }
.html-for-mac .context-menu { --item-hover-bg-color: #E6F0FE; }
#md-notification .btn { border: 0px; }
.dropdown-menu .divider { border-color: rgb(229, 229, 229); }
.ty-preferences .window-content { background-color: rgb(250, 250, 250); }
.ty-preferences .nav-group-item.active { color: white; background: rgb(153, 153, 153); }


</style>
</head>
<body class='typora-export os-windows' >
<div  id='write'  class = 'is-node'><div class='md-toc' mdtype='toc'><p class="md-toc-content"><span class="md-toc-item md-toc-h1" data-ref="n2"><a class="md-toc-inner" href="#1要求和支持的版本">1.要求和支持的版本</a></span><span class="md-toc-item md-toc-h3" data-ref="n4"><a class="md-toc-inner" href="#11-支持的操作系统版本httpsdocsclouderacomdocumentationenterprise6release-notestopicsrgosrequirementshtml">1.1 支持的操作系统版本</a></span><span class="md-toc-item md-toc-h3" data-ref="n28"><a class="md-toc-inner" href="#12硬件要求httpsdocsclouderacomdocumentationenterprise6release-notestopicsrghardwarerequirementshtml">1.2硬件要求</a></span><span class="md-toc-item md-toc-h3" data-ref="n51"><a class="md-toc-inner" href="#13-支持的mysql版本httpsdocsclouderacomdocumentationenterprise6release-notestopicsrgdatabaserequirementshtmlcdhcmsupporteddb">1.3 支持的MySql版本</a></span><span class="md-toc-item md-toc-h3" data-ref="n70"><a class="md-toc-inner" href="#14支持的jdkshttpsdocsclouderacomdocumentationenterprise6release-notestopicsrgjavarequirementshtmljavarequirements">1.4支持的JDKs</a></span><span class="md-toc-item md-toc-h3" data-ref="n101"><a class="md-toc-inner" href="#15-推荐使用的jdkhttpsdocsclouderacomdocumentationenterprise6release-notestopicsrgjavarequirementshtmljavarequirements">1.5 推荐使用的JDK</a></span><span class="md-toc-item md-toc-h3" data-ref="n137"><a class="md-toc-inner" href="#16cm和cdh兼容性">1.6CM和CDH兼容性</a></span><span class="md-toc-item md-toc-h4" data-ref="n138"><a class="md-toc-inner" href="#161-版本支持httpsdocsclouderacomdocumentationenterpriseupgradetopicsugupgradepathshtml">1.6.1 版本支持</a></span><span class="md-toc-item md-toc-h4" data-ref="n148"><a class="md-toc-inner" href="#162-cloudera-manager-600下载地址httpsdocsclouderacomdocumentationenterprise6release-notestopicsrgcm6versiondownloadhtml">1.6.2 Cloudera Manager 6.0.0下载地址</a></span><span class="md-toc-item md-toc-h4" data-ref="n170"><a class="md-toc-inner" href="#165-cdh-600下载地址httpsdocsclouderacomdocumentationenterprise6release-notestopicsrgcdh60downloadhtmlcdh600-download">1.6.5 CDH 6.0.0下载地址</a></span><span class="md-toc-item md-toc-h1" data-ref="n192"><a class="md-toc-inner" href="#2环境搭建">2.环境搭建</a></span><span class="md-toc-item md-toc-h3" data-ref="n195"><a class="md-toc-inner" href="#21安装centos76">2.1安装Centos7.6</a></span><span class="md-toc-item md-toc-h5" data-ref="n221"><a class="md-toc-inner" href="#网络和主机名设置">网络和主机名设置</a></span><span class="md-toc-item md-toc-h5" data-ref="n238"><a class="md-toc-inner" href="#设置cdh1对其它主机免密钥">设置cdh1对其它主机免密钥。</a></span><span class="md-toc-item md-toc-h5" data-ref="n245"><a class="md-toc-inner" href="#关闭防火墙">关闭防火墙</a></span><span class="md-toc-item md-toc-h5" data-ref="n249"><a class="md-toc-inner" href="#selinux关闭">SELINUX关闭</a></span><span class="md-toc-item md-toc-h3" data-ref="n256"><a class="md-toc-inner" href="#22安装mysqlhttpsdocsclouderacomdocumentationenterprise660topicscmigmysqlhtml">2.2安装MySql</a></span><span class="md-toc-item md-toc-h5" data-ref="n257"><a class="md-toc-inner" href="#建立一个mysql目录">建立一个mysql目录</a></span><span class="md-toc-item md-toc-h5" data-ref="n261"><a class="md-toc-inner" href="#下载安装">下载安装</a></span><span class="md-toc-item md-toc-h5" data-ref="n268"><a class="md-toc-inner" href="#给root用户设置密码授权删除多余用户">给root用户设置密码，授权，删除多余用户</a></span><span class="md-toc-item md-toc-h3" data-ref="n300"><a class="md-toc-inner" href="#23安装jdk8httpsdocsclouderacomdocumentationenterprise660topicscdhigjdkinstallationhtml">2.3安装JDK8</a></span><span class="md-toc-item md-toc-h5" data-ref="n301"><a class="md-toc-inner" href="#231首先下载">2.3.1.首先下载</a></span><span class="md-toc-item md-toc-h5" data-ref="n305"><a class="md-toc-inner" href="#232通过ftp上传到cdh1上面">2.3.2.通过FTP上传到cdh1上面</a></span><span class="md-toc-item md-toc-h5" data-ref="n313"><a class="md-toc-inner" href="#233配置环境">2.3.3.配置环境</a></span><span class="md-toc-item md-toc-h3" data-ref="n321"><a class="md-toc-inner" href="#24系统环境准备httpsdocsclouderacomdocumentationenterprise660topicsinstallationreqtshtml">2.4系统环境准备</a></span><span class="md-toc-item md-toc-h5" data-ref="n322"><a class="md-toc-inner" href="#241安装ntp">2.4.1安装NTP</a></span><span class="md-toc-item md-toc-h3" data-ref="n330"><a class="md-toc-inner" href="#25为cm配置repository就是rpm仓库）httpsdocsclouderacomdocumentationenterprise660topicsconfigurecmrepohtml">2.5为CM配置Repository（就是rpm仓库）</a></span><span class="md-toc-item md-toc-h5" data-ref="n331"><a class="md-toc-inner" href="#251-在cdh1cdh2cdh3安装clouderamanager">2.5.1 在cdh1,cdh2,cdh3安装ClouderaManager</a></span><span class="md-toc-item md-toc-h5" data-ref="n336"><a class="md-toc-inner" href="#252-导入存储库签名gpg密钥">2.5.2 导入存储库签名GPG密钥： </a></span><span class="md-toc-item md-toc-h3" data-ref="n341"><a class="md-toc-inner" href="#26-安装cloudera-manager服务httpsdocsclouderacomdocumentationenterprise660topicsinstallcmserverhtml">2.6 安装Cloudera Manager服务</a></span><span class="md-toc-item md-toc-h5" data-ref="n342"><a class="md-toc-inner" href="#261在cdh1服务器安装serverdaemonsagent">2.6.1在cdh1服务器安装server,daemons，agent</a></span><span class="md-toc-item md-toc-h5" data-ref="n345"><a class="md-toc-inner" href="#262在cdh2cdh3服务器安装daemonsagent">2.6.2在cdh2，cdh3服务器安装daemons，agent</a></span><span class="md-toc-item md-toc-h5" data-ref="n348"><a class="md-toc-inner" href="#263-在所有主机上指定server服务器地址和端口">2.6.3 在所有主机上指定server服务器地址和端口</a></span><span class="md-toc-item md-toc-h5" data-ref="n355"><a class="md-toc-inner" href="#264启动所有服务器的代理">2.6.4启动所有服务器的代理</a></span><span class="md-toc-item md-toc-h3" data-ref="n358"><a class="md-toc-inner" href="#27配置mysqlhttpsdocsclouderacomdocumentationenterprise660topicscmigmysqlhtml">2.7配置MySql</a></span><span class="md-toc-item md-toc-h5" data-ref="n359"><a class="md-toc-inner" href="#271-停止服务器">2.7.1 停止服务器</a></span><span class="md-toc-item md-toc-h5" data-ref="n362"><a class="md-toc-inner" href="#272移除老的日志文件">2.7.2移除老的日志文件</a></span><span class="md-toc-item md-toc-h5" data-ref="n364"><a class="md-toc-inner" href="#273-更新-mycnf-符合以下要求">2.7.3 更新 my.cnf 符合以下要求</a></span><span class="md-toc-item md-toc-h5" data-ref="n405"><a class="md-toc-inner" href="#274安装mysql-jdbc驱动程序">2.7.4安装MySql JDBC驱动程序</a></span><span class="md-toc-item md-toc-h5" data-ref="n424"><a class="md-toc-inner" href="#275为cloudera创建数据库">2.7.5为cloudera创建数据库</a></span><span class="md-toc-item md-toc-h3" data-ref="n528"><a class="md-toc-inner" href="#28设置cloudea-manager数据库httpsdocsclouderacomdocumentationenterprise660topicspreparecmdatabasehtml">2.8设置Cloudea Manager数据库</a></span><span class="md-toc-item md-toc-h5" data-ref="n529"><a class="md-toc-inner" href="#假如275你已经配置好的数据库执行下面">假如2.7.5你已经配置好的数据库，执行下面：</a></span><span class="md-toc-item md-toc-h5" data-ref="n535"><a class="md-toc-inner" href="#如果275没有配置执行下面">如果2.7.5没有配置，执行下面</a></span><span class="md-toc-item md-toc-h3" data-ref="n543"><a class="md-toc-inner" href="#29安装cdh和其它软件httpsdocsclouderacomdocumentationenterprise660topicsinstallsoftwarecmwizardhtml">2.9安装CDH和其它软件</a></span><span class="md-toc-item md-toc-h5" data-ref="n544"><a class="md-toc-inner" href="#291启动cloudra-manager服务器">2.9.1启动Cloudra Manager服务器</a></span><span class="md-toc-item md-toc-h5" data-ref="n553"><a class="md-toc-inner" href="#292登陆ui系统">2.9.2登陆UI系统</a></span><span class="md-toc-item md-toc-h5" data-ref="n559"><a class="md-toc-inner" href="#293进入系统开始安装流程">2.9.3进入系统，开始安装流程</a></span><span class="md-toc-item md-toc-h6" data-ref="n607"><a class="md-toc-inner" href="#安装hive">安装Hive</a></span><span class="md-toc-item md-toc-h6" data-ref="n612"><a class="md-toc-inner" href="#oozie简介">oozie简介</a></span><span class="md-toc-item md-toc-h6" data-ref="n616"><a class="md-toc-inner" href="#安装oozie">安装oozie</a></span><span class="md-toc-item md-toc-h6" data-ref="n619"><a class="md-toc-inner" href="#oozie问题">oozie问题</a></span><span class="md-toc-item md-toc-h6" data-ref="n628"><a class="md-toc-inner" href="#hue简介">hue简介</a></span><span class="md-toc-item md-toc-h6" data-ref="n630"><a class="md-toc-inner" href="#安装hue">安装hue</a></span><span class="md-toc-item md-toc-h6" data-ref="n636"><a class="md-toc-inner" href="#impala简介">impala简介</a></span><span class="md-toc-item md-toc-h6" data-ref="n640"><a class="md-toc-inner" href="#安装impala">安装impala</a></span><span class="md-toc-item md-toc-h6" data-ref="n642"><a class="md-toc-inner" href="#impala架构图">impala架构图</a></span><span class="md-toc-item md-toc-h6" data-ref="n645"><a class="md-toc-inner" href="#impala使用">impala使用</a></span><span class="md-toc-item md-toc-h6" data-ref="n649"><a class="md-toc-inner" href="#题外话">题外话：</a></span></p></div><h1><a name="1要求和支持的版本" class="md-header-anchor"></a><span>1.要求和支持的版本</span></h1><p><strong><span>（PS:我使用的环境，都用加粗标识了。）</span></strong></p><h3><a name="11-支持的操作系统版本httpsdocsclouderacomdocumentationenterprise6release-notestopicsrgosrequirementshtml" class="md-header-anchor"></a><span>1.1 </span><a href='https://docs.cloudera.com/documentation/enterprise/6/release-notes/topics/rg_os_requirements.html'><span>支持的操作系统版本</span></a></h3><figure><table><thead><tr><th style='text-align:left;' ><span>Operating System</span></th><th style='text-align:left;' ><span>Version (bold=new)</span></th></tr></thead><tbody><tr><td style='text-align:left;' ><strong><span>RHEL/CentOS/OL with RHCK kernel</span></strong></td><td style='text-align:left;' ><strong><span>7.6</span></strong><span>, 7.5, 7.4, 7.3, 7.2,6.10, 6.9 , 6.8</span></td></tr><tr><td style='text-align:left;' ><span>Oracle Linux (OL)</span></td><td style='text-align:left;' ><span>7.4, 7.3, 7.2 (UEK default)</span></td></tr><tr><td style='text-align:left;' ><span>SUSE Linux Enterprise Server</span></td><td style='text-align:left;' >&nbsp;</td></tr><tr><td style='text-align:left;' ><span>SLES</span></td><td style='text-align:left;' ><span>12 SP4, 12 SP3, 12 SP2</span></td></tr><tr><td style='text-align:left;' ><span>Ubuntu</span></td><td style='text-align:left;' >&nbsp;</td></tr><tr><td style='text-align:left;' ><span>Ubuntu</span></td><td style='text-align:left;' ><span>16.04 LTS (Xenial)</span></td></tr></tbody></table></figure><p><span>																						</span><span>(系统版本要求）</span></p><h3><a name="12硬件要求httpsdocsclouderacomdocumentationenterprise6release-notestopicsrghardwarerequirementshtml" class="md-header-anchor"></a><span>1.2</span><a href='https://docs.cloudera.com/documentation/enterprise/6/release-notes/topics/rg_hardware_requirements.html'><span>硬件要求</span></a></h3><figure><table><thead><tr><th style='text-align:left;' ><span>Component</span></th><th style='text-align:left;' ><span>Storage</span></th><th style='text-align:left;' ><span>Notes</span></th></tr></thead><tbody><tr><td style='text-align:left;' ><span>Partition hosting /usr</span></td><td style='text-align:left;' ><span>1 GB</span></td><td style='text-align:left;' >&nbsp;</td></tr><tr><td style='text-align:left;' ><span>Partition hosting /var</span></td><td style='text-align:left;' ><span>5 GB to 1 TB</span></td><td style='text-align:left;' ><span>Scales according to number of nodes managed. See table below.</span></td></tr><tr><td style='text-align:left;' ><span>Partition hosting /opt</span></td><td style='text-align:left;' ><span>15 GB minimum</span></td><td style='text-align:left;' ><span>Usage grows as the number of parcels downloaded increases.</span></td></tr><tr><td style='text-align:left;' ><span>Cloudera Manager Database Server</span></td><td style='text-align:left;' ><span>5 GB</span></td><td style='text-align:left;' ><span>If the Cloudera Manager Database is shared with the Service Monitor and Host Monitor, more storage space is required to meet the requirements for those components.</span></td></tr></tbody></table></figure><p><span>																						</span><span>（系统空间要求）</span></p><h3><a name="13-支持的mysql版本httpsdocsclouderacomdocumentationenterprise6release-notestopicsrgdatabaserequirementshtmlcdhcmsupporteddb" class="md-header-anchor"></a><span>1.3 </span><a href='https://docs.cloudera.com/documentation/enterprise/6/release-notes/topics/rg_database_requirements.html#cdh_cm_supported_db'><span>支持的MySql版本</span></a></h3><figure><table><thead><tr><th style='text-align:left;' ><span>MySQL版本</span></th><th style='text-align:left;' ><span>Cloudera Enterprise 6.x</span></th></tr></thead><tbody><tr><td style='text-align:left;' ><span>5.1（RHEL / CentOS / OEL 6的默认设置）</span></td><td style='text-align:left;' ><img src="https://docs.cloudera.com/documentation/enterprise/6/release-notes/images/pcm_check.png" referrerpolicy="no-referrer" alt="img"></td></tr><tr><td style='text-align:left;' ><span>5.5（Debian 8.9的默认设置）</span></td><td style='text-align:left;' ><img src="https://docs.cloudera.com/documentation/enterprise/6/release-notes/images/pcm_check.png" referrerpolicy="no-referrer" alt="img"></td></tr><tr><td style='text-align:left;' ><span>5.6</span></td><td style='text-align:left;' ><img src="https://docs.cloudera.com/documentation/enterprise/6/release-notes/images/pcm_check.png" referrerpolicy="no-referrer" alt="img"></td></tr><tr><td style='text-align:left;' ><strong><span>5.7</span></strong><span>（Ubuntu 16.04、18.04 LTS的默认设置）</span></td><td style='text-align:left;' ><img src="https://docs.cloudera.com/documentation/enterprise/6/release-notes/images/pcm_check.png" referrerpolicy="no-referrer" alt="img"></td></tr></tbody></table></figure><p><span>																						</span><span>（MySql版本要求）</span></p><p>&nbsp;</p><h3><a name="14支持的jdkshttpsdocsclouderacomdocumentationenterprise6release-notestopicsrgjavarequirementshtmljavarequirements" class="md-header-anchor"></a><span>1.4</span><a href='https://docs.cloudera.com/documentation/enterprise/6/release-notes/topics/rg_java_requirements.html#java_requirements'><span>支持的JDKs</span></a></h3><figure><table><thead><tr><th style='text-align:left;' ><span>Cloudera企业版</span></th><th style='text-align:left;' ><span>支持的Oracle JDK</span></th><th style='text-align:left;' ><span>支持的OpenJDK</span></th></tr></thead><tbody><tr><td style='text-align:left;' ><span>5.3 -5.15</span></td><td style='text-align:left;' ><span>1.7、1.8</span></td><td style='text-align:left;' ><span>没有</span></td></tr><tr><td style='text-align:left;' ><span>5.16 和更高的5.x版本</span></td><td style='text-align:left;' ><span>1.7、1.8</span></td><td style='text-align:left;' ><span>1.8</span></td></tr><tr><td style='text-align:left;' ><strong><span>6.0</span></strong></td><td style='text-align:left;' ><span>1.8</span></td><td style='text-align:left;' ><span>没有</span></td></tr><tr><td style='text-align:left;' ><span>6.1</span></td><td style='text-align:left;' ><span>1.8</span></td><td style='text-align:left;' ><span>1.8</span></td></tr><tr><td style='text-align:left;' ><span>6.2</span></td><td style='text-align:left;' ><span>1.8</span></td><td style='text-align:left;' ><span>1.8</span></td></tr><tr><td style='text-align:left;' ><span>6.3</span></td><td style='text-align:left;' ><span>1.8</span></td><td style='text-align:left;' ><span>1.8、11.0.3或更高</span></td></tr></tbody></table></figure><p><span>																	</span><span>（从上图可以看到6.0支持的是1.8版本）</span></p><h3><a name="15-推荐使用的jdkhttpsdocsclouderacomdocumentationenterprise6release-notestopicsrgjavarequirementshtmljavarequirements" class="md-header-anchor"></a><span>1.5 </span><a href='https://docs.cloudera.com/documentation/enterprise/6/release-notes/topics/rg_java_requirements.html#java_requirements'><span>推荐使用的JDK</span></a></h3><figure><table><thead><tr><th style='text-align:left;' ><span>Oracle JDK版本</span></th><th style='text-align:left;' ><span>笔记</span></th></tr></thead><tbody><tr><td style='text-align:left;' ><strong><span>1.8u181</span></strong></td><td style='text-align:left;' ><span>推荐/最新版本经过测试</span></td></tr><tr><td style='text-align:left;' ><span>1.8u162</span></td><td style='text-align:left;' ><span>推荐的</span></td></tr><tr><td style='text-align:left;' ><span>1.8u141</span></td><td style='text-align:left;' ><span>推荐的</span></td></tr><tr><td style='text-align:left;' ><span>1.8u131</span></td><td style='text-align:left;' ><span>推荐的</span></td></tr><tr><td style='text-align:left;' ><span>1.8u121</span></td><td style='text-align:left;' ><span>推荐的</span></td></tr><tr><td style='text-align:left;' ><span>1.8u111</span></td><td style='text-align:left;' ><span>推荐的</span></td></tr><tr><td style='text-align:left;' ><span>1.8u102</span></td><td style='text-align:left;' ><span>推荐的</span></td></tr><tr><td style='text-align:left;' ><span>1.8u91</span></td><td style='text-align:left;' ><span>推荐的</span></td></tr><tr><td style='text-align:left;' ><span>1.8u74</span></td><td style='text-align:left;' ><span>推荐的</span></td></tr><tr><td style='text-align:left;' ><span>1.8u31</span></td><td style='text-align:left;' ><span>最低要求</span></td></tr></tbody></table></figure><p><span>																						</span><span>（推荐的MySql版本）</span></p><h3><a name="16cm和cdh兼容性" class="md-header-anchor"></a><span>1.6CM和CDH兼容性</span></h3><h4><a name="161-版本支持httpsdocsclouderacomdocumentationenterpriseupgradetopicsugupgradepathshtml" class="md-header-anchor"></a><a href='https://docs.cloudera.com/documentation/enterprise/upgrade/topics/ug_upgrade_paths.html'><span>1.6.1 版本支持</span></a></h4><figure><table><thead><tr><th style='text-align:left;' ><span>当前的Cloudera Manager版本</span></th><th style='text-align:left;' ><span>支持的Cloudera Manager升级路径</span></th><th style='text-align:left;' ><span>支持的CDH升级路径</span></th></tr></thead><tbody><tr><td style='text-align:left;' ><span>6.0</span></td><td style='text-align:left;' ><span>6.3.x6.2.x6.1.x6.0.x维护版本</span></td><td style='text-align:left;' ><span>6.0.x维护版本CDH 5.7-5.14的任何次要版本</span></td></tr></tbody></table></figure><h4><a name="162-cloudera-manager-600下载地址httpsdocsclouderacomdocumentationenterprise6release-notestopicsrgcm6versiondownloadhtml" class="md-header-anchor"></a><a href='https://docs.cloudera.com/documentation/enterprise/6/release-notes/topics/rg_cm_6_version_download.html'><span>1.6.2 Cloudera Manager 6.0.0下载地址</span></a></h4><figure><table><thead><tr><th style='text-align:left;' ><span>类型</span></th><th style='text-align:left;' ><span>位置 （基本网址）</span></th><th style='text-align:left;' ><span>回购文件</span></th></tr></thead><tbody><tr><td style='text-align:left;' ><strong><span>兼容RHEL 7</span></strong></td><td style='text-align:left;' ><a href='https://archive.cloudera.com/cm6/6.0.0/redhat7/yum/' target='_blank' class='url'>https://archive.cloudera.com/cm6/6.0.0/redhat7/yum/</a></td><td style='text-align:left;' ><a href='https://archive.cloudera.com/cm6/6.0.0/redhat7/yum/cloudera-manager.repo'><span>cloudera-manager.repo</span></a></td></tr><tr><td style='text-align:left;' ><span>兼容RHEL6</span></td><td style='text-align:left;' ><a href='https://archive.cloudera.com/cm6/6.0.0/redhat6/yum/' target='_blank' class='url'>https://archive.cloudera.com/cm6/6.0.0/redhat6/yum/</a></td><td style='text-align:left;' ><a href='https://archive.cloudera.com/cm6/6.0.0/redhat6/yum/cloudera-manager.repo'><span>cloudera-manager.repo</span></a></td></tr><tr><td style='text-align:left;' ><span>SLES 12</span></td><td style='text-align:left;' ><a href='https://archive.cloudera.com/cm6/6.0.0/sles12/yum/' target='_blank' class='url'>https://archive.cloudera.com/cm6/6.0.0/sles12/yum/</a></td><td style='text-align:left;' ><a href='https://archive.cloudera.com/cm6/6.0.0/sles12/yum/cloudera-manager.repo'><span>cloudera-manager.repo</span></a></td></tr><tr><td style='text-align:left;' ><span>Ubuntu Xenial（16.04）</span></td><td style='text-align:left;' ><a href='https://archive.cloudera.com/cm6/6.0.0/ubuntu1604/apt/' target='_blank' class='url'>https://archive.cloudera.com/cm6/6.0.0/ubuntu1604/apt/</a></td><td style='text-align:left;' ><a href='https://archive.cloudera.com/cm6/6.0.0/ubuntu1604/apt/cloudera-manager.list'><span>cloudera-manager.lis</span></a></td></tr></tbody></table></figure><h4><a name="165-cdh-600下载地址httpsdocsclouderacomdocumentationenterprise6release-notestopicsrgcdh60downloadhtmlcdh600-download" class="md-header-anchor"></a><a href='https://docs.cloudera.com/documentation/enterprise/6/release-notes/topics/rg_cdh_60_download.html#cdh_600-download'><span>1.6.5 CDH 6.0.0下载地址</span></a></h4><figure><table><thead><tr><th style='text-align:left;' ><span>储存库类型</span></th><th style='text-align:left;' ><span>位置 （基本网址）</span></th></tr></thead><tbody><tr><td style='text-align:left;' ><span>包裹</span></td><td style='text-align:left;' ><a href='https://archive.cloudera.com/cdh6/6.0.0/parcels/' target='_blank' class='url'>https://archive.cloudera.com/cdh6/6.0.0/parcels/</a></td></tr><tr><td style='text-align:left;' ><strong><span>兼容RHEL 7</span></strong></td><td style='text-align:left;' ><a href='https://archive.cloudera.com/cdh6/6.0.0/redhat7/yum/' target='_blank' class='url'>https://archive.cloudera.com/cdh6/6.0.0/redhat7/yum/</a></td></tr><tr><td style='text-align:left;' ><span>兼容RHEL 6</span></td><td style='text-align:left;' ><a href='https://archive.cloudera.com/cdh6/6.0.0/redhat6/yum/' target='_blank' class='url'>https://archive.cloudera.com/cdh6/6.0.0/redhat6/yum/</a></td></tr><tr><td style='text-align:left;' ><span>SLES 12</span></td><td style='text-align:left;' ><a href='https://archive.cloudera.com/cdh6/6.0.0/sles12/yum/' target='_blank' class='url'>https://archive.cloudera.com/cdh6/6.0.0/sles12/yum/</a></td></tr><tr><td style='text-align:left;' ><span>Ubuntu Xenial（16.04）</span></td><td style='text-align:left;' ><a href='https://archive.cloudera.com/cdh6/6.0.0/ubuntu1604/apt/' target='_blank' class='url'>https://archive.cloudera.com/cdh6/6.0.0/ubuntu1604/apt/</a></td></tr></tbody></table></figure><p>&nbsp;</p><p>&nbsp;</p><h1><a name="2环境搭建" class="md-header-anchor"></a><span>2.环境搭建</span></h1><p><strong><span>PS：推荐能使用高版本就使用高版本进行搭建，因为很多老版本都逐渐被淘汰。这也是我花费了三天多时间，使用老版本centos6.5进行搭建遇到了很多坑，最终还是没搭建好总结的一个经验。原因就是你想安装某个软件，官方都不支持下载了，你还得到处找，然后匹配，有一点不匹配就会导致内核不支持，你要是再升级内核，就又得找，然后去安装去实验，麻烦的一批。跟不上时代了，你连哭的地都没有。就相当于互联网时代能在网上购票了，你还去排很长的队去现场买票，那么你就得乘坐交通工具去吧，跑很远的路，等有一天停止人工售票了，你难道还去找门子让别人帮你买票么？话说回来了，也就是软件停更了，你难道还去各个网站去找老版本么？</span></strong></p><p>&nbsp;</p><h3><a name="21安装centos76" class="md-header-anchor"></a><span>2.1安装Centos7.6</span></h3><figure><table><thead><tr><th><span>主机名</span></th><th><span>cdh1</span></th><th><span>cdh2</span></th><th><span>cdh3</span></th></tr></thead><tbody><tr><td><span>IP地址</span></td><td><span>192.168.40.104</span></td><td><span>192.168.40.105</span></td><td><span>192.168.40.106</span></td></tr><tr><td><span>其它环境</span></td><td><span>MySql，JDK</span></td><td><span>JDK</span></td><td><span>JDK</span></td></tr></tbody></table></figure><p><span>首先去网站 </span><a href='http://archive.kernel.org/centos-vault/7.6.1810/isos/x86_64/' target='_blank' class='url'>http://archive.kernel.org/centos-vault/7.6.1810/isos/x86_64/</a><span> 把CentOS-7-x86_64-DVD-1810.iso    下载到本地。</span></p><p><span>下载VMWare虚拟机软件。使用VMWare进行安装，一共需要安装三台，主机名和ip配置如上所示。</span></p><p><span>PS：先安装一台，然后照着下面设置，设置完后克隆下修改主机名和ip就可以了。</span></p><p><span>安装步骤可参考： </span><a href='https://blog.csdn.net/babyxue/article/details/80970526' target='_blank' class='url'>https://blog.csdn.net/babyxue/article/details/80970526</a><span> </span></p><p><span>下面说下安装完成后如何配置IP地址和修改主机名：</span></p><ul><li><p><span>安装vim（找个文件实验一下有没有，有的话忽略这步）</span></p><p><code>yum -y install vim*</code></p></li></ul><h5><a name="网络和主机名设置" class="md-header-anchor"></a><span>网络和主机名设置</span></h5><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; # cd /etc/sysconfig/network-scripts</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; # vi ifcfg-ens33 --这里改为你自己的名称</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 45px;"></div><div class="CodeMirror-gutters" style="display: none; height: 45px;"></div></div></div></pre><p><span>   修改内容如下：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="TYPE=Ethernet" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="type=ethernet"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; #标记显示固定ip</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; BOOTPROTO=static </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; DEFROUTE=yes</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; PEERDNS=yes</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; PEERROUTES=yes</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; IPV4_FAILURE_FATAL=no</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; IPV6INIT=yes</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; IPV6_AUTOCONF=yes</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; IPV6_DEFROUTE=yes</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; IPV6_PEERDNS=yes</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; IPV6_PEERROUTES=yes</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; IPV6_FAILURE_FATAL=no</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; NAME=eno16777736 &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; UUID=c2cc280c-e0a6-4694-b062-e43b5f44db61</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; #网卡名</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; DEVICE=eno16777736 </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; ONBOOT=yes</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; #ip地址，这个以cdh1举例，我设定的为104，后面的cdh2,cdh3可以分别设置为105，106</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; IPADDR=192.168.40.104 </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; #网关地址</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; GATEWAY=192.168.40.2 &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; NETMASK=255.255.255.0</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; DNS1=114.144.144.114</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; DNS2=8.8.8.8</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 560px;"></div><div class="CodeMirror-gutters" style="display: none; height: 560px;"></div></div></div></pre><ul><li><span>修改主机别名</span></li></ul><p><span>      vim /etc/hostname 修改为cdh1</span></p><p><span>	</span><span>  PS：其它主机照着配置即可。 设置完后重启生效。</span></p><ul><li><p><span>修改host文件映射别名</span></p><p><span>vim /etc/hosts 添加 </span></p><p><span>192.168.40.104 cdh1</span></p><p><span>192.168.40.105 cdh2</span></p><p><span>192.168.40.106 cdh3</span></p><p>&nbsp;</p></li></ul><h5><a name="设置cdh1对其它主机免密钥" class="md-header-anchor"></a><span>设置cdh1对其它主机免密钥。</span></h5><p><span>  在cdh1主机执行以下命令。</span></p><blockquote><p><span>ssh-keygen -t rsa </span><span>		</span><span> #一路回车即可</span></p><p><span>ssh-copy-id localhost  #对本机免密钥，会提示输入本机密码</span></p><p><span>ssh-copy-id  cdh2    </span><span>	</span><span>#会提示输入cdh2的密码</span></p><p><span>ssh-copy-id  cdh3</span><span>		</span><span>#会提示输入cdh3的密码</span></p></blockquote><h5><a name="关闭防火墙" class="md-header-anchor"></a><span>关闭防火墙</span></h5><blockquote><p><span>#禁止开机启动</span></p><p><span>[root@cdh1 ~]# systemctl disable firewalld</span>
<span>Removed symlink /etc/systemd/system/multi-user.target.wants/firewalld.service.</span>
<span>Removed symlink /etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service.</span></p></blockquote><h5><a name="selinux关闭" class="md-header-anchor"></a><span>SELINUX关闭</span></h5><blockquote><p><span>setenforce 0</span></p><p><span>vi /etc/selinux/config (SELINUX=disabled)</span></p></blockquote><ul><li><span>克隆到其它主机，并记得修改下主机名和ip</span></li></ul><h3><a name="22安装mysqlhttpsdocsclouderacomdocumentationenterprise660topicscmigmysqlhtml" class="md-header-anchor"></a><span>2.2</span><a href='https://docs.cloudera.com/documentation/enterprise/6/6.0/topics/cm_ig_mysql.html'><span>安装MySql</span></a></h3><h5><a name="建立一个mysql目录" class="md-header-anchor"></a><span>建立一个mysql目录</span></h5><blockquote><p><span>[root@cdh1 etc]# mkdir -p /opt/mysql</span></p><p><span>[root@cdh1 etc]#cd /opt/mysql</span></p></blockquote><h5><a name="下载安装" class="md-header-anchor"></a><span>下载安装</span></h5><blockquote><p><span>$ wget </span><a href='http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpm' target='_blank' class='url'>http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpm</a></p><p><span>$ sudo rpm -ivh mysql-community-release-el7-5.noarch.rpm</span></p><p><span>$ sudo yum update</span></p><p><span>$ sudo yum install mysql-server</span></p><p><span>$ sudo systemctl start mysqld</span></p></blockquote><h5><a name="给root用户设置密码授权删除多余用户" class="md-header-anchor"></a><span>给root用户设置密码，授权，删除多余用户</span></h5><blockquote><p><span>[root@cdh1 mysql]# mysql</span></p><p><span>mysql&gt; use mysql;  --切库</span></p><p><span>mysql&gt; select Host,User,Password,authentication_string from user;  --查询下</span></p></blockquote><p>&nbsp;</p><blockquote><p><span>mysql&gt; grant all privileges on </span><em><span>.</span></em><span> to &#39;root&#39;@&#39;%&#39; identified by &#39;123456&#39; WITH GRANT OPTION; --创建一个新root用户，并授权可以远程登陆</span></p><p><span>mysql&gt; update user set authentication_string=password(&#39;123456&#39;) where user=&#39;root&#39; and host=&#39;%&#39;;  --给用户添加远程登陆密码</span></p></blockquote><blockquote><p><span>mysql&gt; select Host,User,Password,authentication_string from user; --再查询下，可以看的多了个一个root用户</span></p><p><span>+-----------+------+-------------------------------------------+-----------------------+</span>
<span>| Host      | User | Password                                  | authentication_string |</span>
<span>+-----------+------+-------------------------------------------+-----------------------+</span>
<span>| localhost | root |                                           |                       |</span>
<span>| cdh1      | root |                                           |                       |</span>
<span>| 127.0.0.1 | root |                                           |                       |</span>
<span>| ::1       | root |                                           |                       |</span>
<span>| localhost |      |                                           | NULL                  |</span>
<span>| cdh1      |      |                                           | NULL                  |</span>
<span>| %         | root | *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 |                       |</span>
<span>+-----------+------+-------------------------------------------+-----------------------+</span></p></blockquote><blockquote><p><span>mysql&gt; flush privileges;  --刷新权限</span></p><p><span>mysql&gt; quit; --退出</span></p><p><span>[root@VM_0_10_centos ~]# systemctl restart mysqld  --重启下，登陆</span></p><p><span>[root@VM_0_10_centos ~]# mysql -uroot -p</span>
<span>Enter password:</span></p><p><span>然后这个时候通常会提示以下错误：</span></p><p><span>ERROR 1045 (28000): Access denied for user &#39;root&#39;@&#39;cdh1&#39; (using password: YES)。 </span></p><p><span>网上查了很多解决方案，都让设置my.cnf配置文件，然后修改密码。但是这里并不是密码问题，而是上面的一些没密码的用户干扰的。把没密码的用户都删掉，反正也没用，然后就可以了。如下：</span></p><p><span>delete from mysql.user where Password =&#39;&#39;  or Password is null;</span></p><p><span>flush privileges;  --刷新权限</span></p><p><span>systemctl restart mysql  --重启mysql，然后再登陆就可以登陆了，如下所示。</span></p></blockquote><p>&nbsp;</p><blockquote><p><span>[root@cdh1 mysql]# mysql -uroot -p</span>
<span>Enter password:</span></p><p><span>Welcome to the MySQL monitor.  Commands end with ; or \g.</span>
<span>Your MySQL connection id is 2</span>
<span>Server version: 5.6.47 MySQL Community Server (GPL)</span></p><p><span>Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.</span></p><p><span>Oracle is a registered trademark of Oracle Corporation and/or its</span>
<span>affiliates. Other names may be trademarks of their respective</span>
<span>owners.</span></p><p><span>Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.</span></p><p><span>mysql&gt; </span></p></blockquote><p>&nbsp;</p><h3><a name="23安装jdk8httpsdocsclouderacomdocumentationenterprise660topicscdhigjdkinstallationhtml" class="md-header-anchor"></a><span>2.3</span><a href='https://docs.cloudera.com/documentation/enterprise/6/6.0/topics/cdh_ig_jdk_installation.html'><span>安装JDK8</span></a></h3><h5><a name="231首先下载" class="md-header-anchor"></a><span>2.3.1.首先下载</span></h5><p><span>由于官网太慢了，还有有好心人把包搬到了Github上，这样我们就方便下载了。</span></p><p><span> </span><a href='https://github.com/frekele/oracle-java/releases' target='_blank' class='url'>https://github.com/frekele/oracle-java/releases</a><span> </span></p><p><span>根据上面的推荐，这里我选择的1.8u181版本。</span></p><h5><a name="232通过ftp上传到cdh1上面" class="md-header-anchor"></a><span>2.3.2.通过FTP上传到cdh1上面</span></h5><p><span>PS:官方规定一定要上传到/usr/java目录下，没有就创建</span></p><p><span>在cdh1下面创建一个mysql目录</span></p><blockquote><p><span>[root@cdh1 etc]# cd /usr/java/</span></p></blockquote><p><span>通过FTP将下载好的jdk-8u181-linux-x64.tar.gz上传到目录并解压</span></p><blockquote><p><span>tar -xvf jdk-8u181-linux-x64.tar.gz</span></p></blockquote><h5><a name="233配置环境" class="md-header-anchor"></a><span>2.3.3.配置环境</span></h5><blockquote><p><span>[root@cdh1 jdk1.8.0_181]# vim /etc/profile</span></p></blockquote><p><span>在文件下方添加如下内容：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="export JAVA_HOME=/opt/java/jdk1.8.0_181"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="export java_home=/opt/java/jdk1.8.0_181"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">export JAVA_HOME=/usr/java/jdk1.8.0_181</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">export PATH=$JAVA_HOME/bin:$PATH</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">export CLASSPATH=.:$JAVA_HOME/jre/lib/ext:$JAVA_HOME/lib/tools.jar</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 112px;"></div><div class="CodeMirror-gutters" style="display: none; height: 112px;"></div></div></div></pre><p><span>然后重启系统，使用命令java -version命令验证即可</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="[root@cdh1 ~]# java -version"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="[root@cdh1 ~]# java -version"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@cdh1 ~]# java -version</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">java version "1.8.0_181"</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Java(TM) SE Runtime Environment (build 1.8.0_181-b13)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Java HotSpot(TM) 64-Bit Server VM (build 25.181-b13, mixed mode)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 112px;"></div><div class="CodeMirror-gutters" style="display: none; height: 112px;"></div></div></div></pre><p><span>其它机器按照类似步骤配置即可。</span></p><h3><a name="24系统环境准备httpsdocsclouderacomdocumentationenterprise660topicsinstallationreqtshtml" class="md-header-anchor"></a><span>2.4</span><a href='https://docs.cloudera.com/documentation/enterprise/6/6.0/topics/installation_reqts.html'><span>系统环境准备</span></a></h3><h5><a name="241安装ntp" class="md-header-anchor"></a><span>2.4.1安装NTP</span></h5><p><span>PS：NTP是个时间管理器，用于同步时间。</span></p><blockquote><p><span>$  yum -y install ntp </span></p><p><span>$ systemctl enable ntpd  #启用NTP</span></p><p><span>$ systemctl start ntpd</span><span>	</span><span>#运行NTP</span></p><p><span>$ systemctl enable ntpd.service</span><span>	</span><span>#设置开机启动</span></p></blockquote><p>&nbsp;</p><h3><a name="25为cm配置repository就是rpm仓库）httpsdocsclouderacomdocumentationenterprise660topicsconfigurecmrepohtml" class="md-header-anchor"></a><span>2.5</span><a href='https://docs.cloudera.com/documentation/enterprise/6/6.0/topics/configure_cm_repo.html'><span>为CM配置Repository（就是rpm仓库）</span></a></h3><h5><a name="251-在cdh1cdh2cdh3安装clouderamanager" class="md-header-anchor"></a><span>2.5.1 在cdh1,cdh2,cdh3安装ClouderaManager</span></h5><p><span>sudo wget &lt;repo_file_url&gt; -P /etc/yum.repos.d/</span></p><p><span>根据1.6.2推荐，repo_file_url这里写： </span><a href='https://archive.cloudera.com/cm6/6.0.0/redhat7/yum/cloudera-manager.repo' target='_blank' class='url'>https://archive.cloudera.com/cm6/6.0.0/redhat7/yum/cloudera-manager.repo</a><span> </span></p><blockquote><p><span>$ sudo wget </span><a href='https://archive.cloudera.com/cm6/6.0.0/redhat7/yum/cloudera-manager.repo' target='_blank' class='url'>https://archive.cloudera.com/cm6/6.0.0/redhat7/yum/cloudera-manager.repo</a><span>  -P /etc/yum.repos.d/</span></p></blockquote><h5><a name="252-导入存储库签名gpg密钥" class="md-header-anchor"></a><span>2.5.2 导入存储库签名GPG密钥： </span></h5><p><span> RHEL 7 compatible: </span></p><blockquote><p><span>$ sudo rpm --import </span><a href='https://archive.cloudera.com/cm6/6.0.0/redhat7/yum/RPM-GPG-KEY-cloudera' target='_blank' class='url'>https://archive.cloudera.com/cm6/6.0.0/redhat7/yum/RPM-GPG-KEY-cloudera</a></p></blockquote><p>&nbsp;</p><h3><a name="26-安装cloudera-manager服务httpsdocsclouderacomdocumentationenterprise660topicsinstallcmserverhtml" class="md-header-anchor"></a><span>2.6 </span><a href='https://docs.cloudera.com/documentation/enterprise/6/6.0/topics/install_cm_server.html'><span>安装Cloudera Manager服务</span></a></h3><h5><a name="261在cdh1服务器安装serverdaemonsagent" class="md-header-anchor"></a><span>2.6.1在cdh1服务器安装server,daemons，agent</span></h5><blockquote><p><span>$ sudo yum install cloudera-manager-daemons cloudera-manager-agent cloudera-manager-server</span></p></blockquote><h5><a name="262在cdh2cdh3服务器安装daemonsagent" class="md-header-anchor"></a><span>2.6.2在cdh2，cdh3服务器安装daemons，agent</span></h5><blockquote><p><span>$ sudo yum install cloudera-manager-daemons cloudera-manager-agent</span></p></blockquote><h5><a name="263-在所有主机上指定server服务器地址和端口" class="md-header-anchor"></a><span>2.6.3 在所有主机上指定server服务器地址和端口</span></h5><blockquote><p><span>$ vim /etc/cloudera-scm-agent/config.ini </span></p></blockquote><p><span>server_host配置CM Server服务器名，server_port配置CM Server端口</span></p><p><span>这里都要配置成：</span></p><p><span>server_host=cdh1</span></p><p><span>server_port=7182</span></p><h5><a name="264启动所有服务器的代理" class="md-header-anchor"></a><span>2.6.4启动所有服务器的代理</span></h5><blockquote><p><span>$ sudo systemctl start cloudera-scm-agent</span></p></blockquote><h3><a name="27配置mysqlhttpsdocsclouderacomdocumentationenterprise660topicscmigmysqlhtml" class="md-header-anchor"></a><span>2.7</span><a href='https://docs.cloudera.com/documentation/enterprise/6/6.0/topics/cm_ig_mysql.html'><span>配置MySql</span></a></h3><h5><a name="271-停止服务器" class="md-header-anchor"></a><span>2.7.1 停止服务器</span></h5><blockquote><p><span>sudo systemctl stop mysqld</span></p></blockquote><h5><a name="272移除老的日志文件" class="md-header-anchor"></a><span>2.7.2移除老的日志文件</span></h5><p><span>例如将 /var/lib/mysql/ib_logfile0 和 /var/lib/mysql/ib_logfile1 移出 /var/lib/mysql/ 到别的地方备份。</span></p><h5><a name="273-更新-mycnf-符合以下要求" class="md-header-anchor"></a><span>2.7.3 更新 my.cnf 符合以下要求</span></h5><p><span>设置缓存，死锁，最大连接数</span></p><blockquote><p><span>vim  /etc/my.cnf </span></p></blockquote><ul><li><p><span>为防止死锁设置隔离级别为  READ-COMMITTED. </span></p></li><li><p><span>设置存储引擎为InnoDB，而不是MyISAM</span></p><p><span>PS：InnoDB和MyISAM是许多人在使用MySQL时最常用的两个表类型，这两个表类型各有优劣，视具体应用而定。基本的差别为：MyISAM类型不支持事务处理等高级处理，而InnoDB类型支持。MyISAM类型的表强调的是性能，其执行数度比InnoDB类型更快，但是不提供事务支持，而InnoDB提供事务支持以及外部键等高级数据库功能。</span></p></li></ul><p><span>      可以使用命令查看用的哪个引擎：</span></p><blockquote><p><span>mysql&gt; show table status from [YourDatabaseName];</span></p></blockquote><ul><li><p><span>service服务器(这里是cdh1)设置</span><code>innodb_flush_method</code><span>属性为  </span><code>O_DIRECT</code><span>以提供更大吞吐量。</span></p></li><li><p><span>根据服务器集群设置 </span><code>max_connections</code><span> 属性</span></p><ul><li><span>少于50台主机-您可以在同一台主机上存储多个数据库（例如，活动监视器和服务监视器）。如果这样做，您应该：</span></li><li><span>将每个数据库放在其自己的存储卷上。</span></li><li><span>每个数据库允许100个最大连接，然后添加50个额外的连接。例如，对于两个数据库，将最大连接数设置为250。如果在一个主机上存储五个数据库（Cloudera Manager Server，Activity Monitor，Reports Manager，Cloudera Navigator和Hive metastore的数据库），则将最大连接数设置为550。 </span></li><li><span>超过50台不要在同一个主机上存储多个数据库。每个数据库应配置单独的主机。</span></li><li><span>超过1000台应设置</span><code>max_allowed_packet</code><span>为16M。</span></li></ul><p><span>下面是一个推荐配置表：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[mysqld]</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">datadir=/var/lib/mysql</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">socket=/var/lib/mysql/mysql.sock</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">transaction-isolation = READ-COMMITTED</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"># Disabling symbolic-links is recommended to prevent assorted security risks;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"># to do so, uncomment this line:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">symbolic-links = 0</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">key_buffer_size = 32M</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">max_allowed_packet = 32M</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">thread_stack = 256K</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">thread_cache_size = 64</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">query_cache_limit = 8M</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">query_cache_size = 64M</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">query_cache_type = 1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">max_connections = 550</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#expire_logs_days = 10</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#max_binlog_size = 100M</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#log_bin should be on a disk with enough free space.</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#Replace '/var/lib/mysql/mysql_binary_log' with an appropriate path for your</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#system and chown the specified folder to the mysql user.</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">log_bin=/var/lib/mysql/mysql_binary_log</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#In later versions of MySQL, if you enable the binary log and do not set</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#a server_id, MySQL will not start. The server_id must be unique within</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#the replicating group.</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">server_id=1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">binlog_format = mixed</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">read_buffer_size = 2M</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">read_rnd_buffer_size = 16M</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">sort_buffer_size = 8M</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">join_buffer_size = 8M</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"># InnoDB settings</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">innodb_file_per_table = 1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">innodb_flush_log_at_trx_commit  = 2</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">innodb_log_buffer_size = 64M</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">innodb_buffer_pool_size = 4G</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">innodb_thread_concurrency = 8</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">innodb_flush_method = O_DIRECT</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">innodb_log_file_size = 512M</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[mysqld_safe]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">log-error=/var/log/mysqld.log</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">pid-file=/var/run/mysqld/mysqld.pid</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">sql_mode=STRICT_ALL_TABLES</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1277px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1277px;"></div></div></div></pre></li></ul><p>&nbsp;</p><ul><li><p><span>确保数据库启用</span></p><blockquote><p><span>$ sudo systemctl enable mysqld</span></p></blockquote></li><li><p><span>启动数据库</span></p><blockquote><p><span>$ sudo systemctl start mysqld</span></p></blockquote></li></ul><h5><a name="274安装mysql-jdbc驱动程序" class="md-header-anchor"></a><span>2.7.4安装MySql JDBC驱动程序</span></h5><p><span>在所有数据据服务器安装JDBC程序。官网推荐安装5.1版本。安装步骤如下：</span></p><p><span>其中可以先在cdh1安装，然后复制到cdh2和cdh3即可（cdh2和cdh3安装了，就可以使用cdh1数据库了。）:</span></p><ul><li><p><span>下载JDBC驱动程序</span></p><blockquote><p><span>[root@cdh1 mysql]# cd /opt/mysql</span></p><p><span>[root@cdh1 mysql]# mkdir jdbcDriver</span></p><p><span>[root@cdh1 mysql]# cd jdbcDriver</span></p><p><span>[root@cdh1 jdbcDriver]# wget </span><a href='https://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.46.tar.gz' target='_blank' class='url'>https://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.46.tar.gz</a></p></blockquote></li><li><p><span>放入到/usr/share/java目录下</span></p><blockquote><p><span>[root@cdh1 jdbcDriver]# tar -xf mysql-connector-java-5.1.46.tar.gz</span></p><p><span>[root@cdh1 jdbcDriver]# cd mysql-connector-java-5.1.46</span></p><p><span>[root@cdh1 mysql-connector-java-5.1.46]# sudo mkdir -p /usr/share/java  --创建java目录</span></p><p><span>[root@cdh1 mysql-connector-java-5.1.46]# cp mysql-connector-java-5.1.46.jar /usr/share/java/mysql-connector-java.jar --将驱动复制到/usr/share/java目录，并重命名</span></p></blockquote></li></ul><p>&nbsp;</p><h5><a name="275为cloudera创建数据库" class="md-header-anchor"></a><span>2.7.5为cloudera创建数据库</span></h5><ul><li><p><span>登陆数据库</span></p><blockquote><p><span>systemctl start mysqld</span></p><p><span>$ mysql -u root -p</span></p><p><span>Enter password:</span></p></blockquote></li><li><p><span>创建数据库</span></p><p><span>语法参考：</span></p><ul><li><span>创建数据库：</span></li></ul><blockquote><p><span>mysql&gt;CREATE DATABASE </span><database><span> DEFAULT CHARACTER SET </span><character set><span> DEFAULT COLLATE utf8_general_ci;</span></p><p><span>Query OK, 1 row affected (0.00 sec)</span></p></blockquote><ul><li><span>给用户授权：</span></li></ul><blockquote><p><span>GRANT ALL ON </span><database><span>.* TO &#39;</span><user><span>&#39;@&#39;%&#39; IDENTIFIED BY &#39;</span><password><span>&#39;;</span></p><p><span>Query OK, 0 rows affected (0.00 sec)</span></p><p><span>flush privileges;</span></p></blockquote><p><span>需要创建的表：</span></p></li></ul><figure><table><thead><tr><th style='text-align:left;' ><span>Service</span></th><th style='text-align:left;' ><span>Database</span></th><th style='text-align:left;' ><span>User</span></th></tr></thead><tbody><tr><td style='text-align:left;' ><span>Cloudera Manager Server</span></td><td style='text-align:left;' ><span>scm</span></td><td style='text-align:left;' ><span>scm</span></td></tr><tr><td style='text-align:left;' ><span>Activity Monitor</span></td><td style='text-align:left;' ><span>amon</span></td><td style='text-align:left;' ><span>amon</span></td></tr><tr><td style='text-align:left;' ><span>Reports Manager</span></td><td style='text-align:left;' ><span>rman</span></td><td style='text-align:left;' ><span>rman</span></td></tr><tr><td style='text-align:left;' ><span>Hue</span></td><td style='text-align:left;' ><span>hue</span></td><td style='text-align:left;' ><span>hue</span></td></tr><tr><td style='text-align:left;' ><span>Hive Metastore Server</span></td><td style='text-align:left;' ><span>metastore</span></td><td style='text-align:left;' ><span>hive</span></td></tr><tr><td style='text-align:left;' ><span>Sentry Server</span></td><td style='text-align:left;' ><span>sentry</span></td><td style='text-align:left;' ><span>sentry</span></td></tr><tr><td style='text-align:left;' ><span>Cloudera Navigator Audit Server</span></td><td style='text-align:left;' ><span>nav</span></td><td style='text-align:left;' ><span>nav</span></td></tr><tr><td style='text-align:left;' ><span>Cloudera Navigator Metadata Server</span></td><td style='text-align:left;' ><span>navms</span></td><td style='text-align:left;' ><span>navms</span></td></tr><tr><td style='text-align:left;' ><span>Oozie</span></td><td style='text-align:left;' ><span>oozie</span></td><td style='text-align:left;' ><span>oozie</span></td></tr></tbody></table></figure><p><span>  拿Cloudra Manager Server举例：</span></p><ul><li><span>创建数据库scm，hive，hue，oozie</span></li></ul><blockquote><p><span>$ mysql&gt; CREATE DATABASE scm DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</span></p><p><span>$ mysql&gt; CREATE DATABASE metastore DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</span></p><p><span>$ mysql&gt; CREATE DATABASE hue DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</span></p><p><span>$ mysql&gt; CREATE DATABASE oozie DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</span></p></blockquote><p><span>	</span></p><ul><li><span>给用户授权</span></li></ul><blockquote><p><span>mysql&gt; GRANT ALL ON scm.* TO &#39;scm&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39; WITH GRANT OPTION;</span></p><p><span>mysql&gt; GRANT ALL ON metastore.* TO &#39;hive&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39; WITH GRANT OPTION;</span></p><p><span>mysql&gt; GRANT ALL ON hue.* TO &#39;hue&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39; WITH GRANT OPTION;</span></p><p><span>mysql&gt; GRANT ALL ON oozie.* TO &#39;oozie&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39; WITH GRANT OPTION;</span></p><p>&nbsp;</p><p><span>mysql&gt;use mysql; --注意切换数据库哦</span></p><p><span>mysql&gt; update user set authentication_string=password(&#39;123456&#39;) where user=&#39;scm&#39; and host=&#39;%&#39;;  --自己创建的用户是没有密码的，手动更新</span></p><p><span>mysql&gt; update user set authentication_string=password(&#39;123456&#39;) where user=&#39;hive&#39; and host=&#39;%&#39;;  --自己创建的用户是没有密码的，手动更新</span></p><p><span>mysql&gt; update user set authentication_string=password(&#39;123456&#39;) where user=&#39;hue&#39; and host=&#39;%&#39;;  --自己创建的用户是没有密码的，手动更新</span></p><p><span>mysql&gt; update user set authentication_string=password(&#39;123456&#39;) where user=&#39;oozie&#39; and host=&#39;%&#39;;  --自己创建的用户是没有密码的，手动更新</span></p></blockquote><p>&nbsp;</p><blockquote><p><span>mysql&gt; flush privileges;  --刷新权限</span></p></blockquote><p><span>  </span></p><ul><li><span>确认下是否创建成功</span></li></ul><blockquote><p><span>mysql&gt;SHOW DATABASES;</span></p><p><span>mysql&gt;SHOW GRANTS FOR &#39;scm&#39;@&#39;%&#39;;</span></p><p><span>mysql&gt;SHOW GRANTS FOR &#39;hive&#39;@&#39;%&#39;;</span></p><p><span>mysql&gt;SHOW GRANTS FOR &#39;hue&#39;@&#39;%&#39;;</span></p><p><span>mysql&gt;SHOW GRANTS FOR &#39;oozie&#39;@&#39;%&#39;;</span></p></blockquote><p><strong><span>PS：%授权用户本地登陆的时候需要指定主机：  mysql -u用户名  -p密码  -h192.168.9.111 </span></strong></p><h3><a name="28设置cloudea-manager数据库httpsdocsclouderacomdocumentationenterprise660topicspreparecmdatabasehtml" class="md-header-anchor"></a><span>2.8</span><a href='https://docs.cloudera.com/documentation/enterprise/6/6.0/topics/prepare_cm_database.html'><span>设置Cloudea Manager数据库</span></a></h3><h5><a name="假如275你已经配置好的数据库执行下面" class="md-header-anchor"></a><span>假如2.7.5你已经配置好的数据库，执行下面：</span></h5><blockquote><p><span>sudo /opt/cloudera/cm/schema/scm_prepare_database.sh </span><databaseType><span> </span><databaseName><span> </span><databaseUser><span> -h 主机名或IP</span></p></blockquote><p><span>例如:</span></p><blockquote><p><span>sudo /opt/cloudera/cm/schema/scm_prepare_database.sh mysql  scm  scm -h cdh1</span></p></blockquote><h5><a name="如果275没有配置执行下面" class="md-header-anchor"></a><span>如果2.7.5没有配置，执行下面</span></h5><blockquote><p><span>sudo /opt/cloudera/cm/schema/scm_prepare_database.sh [选项] &lt;数据库类型&gt;  &lt;数据库名称&gt;  &lt;数据库用户&gt;  &lt;密码&gt;</span></p></blockquote><p><span>例如：</span></p><blockquote><p><span>sudo /opt/cloudera/cm/schema/scm_prepare_database.sh mysql  scm  -uroot  -p123456</span></p></blockquote><p>&nbsp;</p><h3><a name="29安装cdh和其它软件httpsdocsclouderacomdocumentationenterprise660topicsinstallsoftwarecmwizardhtml" class="md-header-anchor"></a><span>2.9</span><a href='https://docs.cloudera.com/documentation/enterprise/6/6.0/topics/install_software_cm_wizard.html'><span>安装CDH和其它软件</span></a></h3><h5><a name="291启动cloudra-manager服务器" class="md-header-anchor"></a><span>2.9.1启动Cloudra Manager服务器</span></h5><p><strong><span>注意：建议先参考2.9.3里面的图8，将文件下载到本地，然后上传到服务器，再进行下面操作，不然访问外国的网站很慢，会导致无法下载，很麻烦，这个坑我帮你踩过了，别怪没提醒哦~</span></strong></p><blockquote><p><span>$ sudo systemctl start cloudera-scm-server</span></p></blockquote><p><span> 等待几分钟，以启动Cloudera Manager Server。要观察启动过程，请在Cloudera Manager Server主机上运行以下命令： </span></p><blockquote><p><span>$ sudo tail -f /var/log/cloudera-scm-server/cloudera-scm-server.log</span></p></blockquote><p><span>当出现一下内容时证明安装成功了:</span></p><p><em><span>INFO WebServerImpl:com.cloudera.server.cmf.WebServerImpl: Started Jetty server.</span></em></p><h5><a name="292登陆ui系统" class="md-header-anchor"></a><span>2.9.2登陆UI系统</span></h5><p><span>访问地址：  http://&lt;server_host&gt;:7180 </span></p><p><span>这里是:</span></p><blockquote><p><a href='http://cdh1:7180' target='_blank' class='url'>http://cdh1:7180</a><span> </span></p></blockquote><p><span>默认登陆账号和密码都是</span><code>admin</code></p><h5><a name="293进入系统开始安装流程" class="md-header-anchor"></a><span>2.9.3进入系统，开始安装流程</span></h5><p><strong><span>注意：</span></strong><span>可以提前参考地——步，将文件下载到本地，然后上传到服务器，</span></p><p><span>图1：</span></p><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/1.png" referrerpolicy="no-referrer" alt="3JIlZ9.png"></p><p><span>图2：</span></p><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/2.png" referrerpolicy="no-referrer" alt="3JI1aR.png"></p><p><span>图3：</span></p><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/3.png" referrerpolicy="no-referrer" alt="3JI3I1.png"></p><p><span>图4：</span></p><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/4.png" referrerpolicy="no-referrer" alt="3JIYRK.png"></p><p><span>图5：</span></p><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/5.png" referrerpolicy="no-referrer" alt="3JI6Rf.png"></p><p><span>图6：</span></p><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/6.png" referrerpolicy="no-referrer" alt="3JIGPx.png"></p><p><span>图7：</span></p><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/7.png" referrerpolicy="no-referrer" alt="3JIDII.png"></p><p><span>图8：</span></p><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/8.1.png" referrerpolicy="no-referrer" alt="3JIUMD.png"></p><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/8.2.png" referrerpolicy="no-referrer" alt="3JIase.png"></p><p><span>PS：如果下载比较慢的话，可以手动</span><a href=' https://archive.cloudera.com/cdh5/parcels/5.14.4/  '><span>下载</span></a><span>到本地（本地也慢的话，可以使用一台国外云服务器进行下载，下载完后再通过FTP下载到本地），然后上传到Manager Server服务器的/opt/cloudera/parcel-repo 下面。然后</span><strong><span>注意注意</span></strong><span>，这里需要</span><strong><span>重启manager service</span></strong><span>服务。然后重新登陆，</span><strong><span>不然它还会自动下载</span></strong><span>！！！</span></p><p><span>重启完后继续，报了异常：</span><strong><span>主机运行不良</span></strong><span>。查了下 </span><a href=' https://blog.csdn.net/qq_21383435/article/details/87889452 '><span>解决方案</span></a><span>,删除cm_guid 文件，然后重启agent服务。</span></p><blockquote><p><span>rm -f  /var/lib/cloudera-scm-agent/cm_guid  --移除</span></p><p><span>sudo systemctl restart cloudera-scm-server</span></p><p><span>sudo systemctl restart cloudera-scm-agent</span></p><p><span>登陆数据库，删除上面创建的scm数据库里面的所有的表。</span></p><p><span>sudo tail -f /var/log/cloudera-scm-server/cloudera-scm-server.log</span></p></blockquote><p><span>然后再重新登陆。挺费时间的,毕竟重启一次很慢，不过也没办法啦~</span></p><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/8.3.png" referrerpolicy="no-referrer" alt="3JI5on.png"></p><p>&nbsp;</p><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/8.4.png" referrerpolicy="no-referrer" alt="3JIdqH.png"></p><p><span>图9：</span></p><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/9.png" referrerpolicy="no-referrer" alt="3JIyJP.png"></p><p><span>图10：</span></p><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/10.png" referrerpolicy="no-referrer" alt="3JI0Zd.png"></p><p><span>图11：</span></p><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/11.png" referrerpolicy="no-referrer" alt="3JIBdA.png"></p><p><span>PS：上面提示红色表示有错误，黄色表示警告，绿色表示正常。查询错误不用管，等集群运行一会有数据了就显示了。</span></p><p><span>上面可能遇到的问题及解决方案：</span></p><p><span>问题1：Could not create the Java Virtual Machine。。。。  </span></p><p><span>解决方案：这个是虚拟机内存太小造成的，改大些就好了。</span><a href=' https://blog.csdn.net/qq_42859864/article/details/89333210 '><span>参考链接</span></a></p><p><span>问题2： Actually, the** Job History server** would be owned by </span><code>mapred</code><span> and if you want to see the exact permissions you should refer to: </span></p><p><span>解决方案：这个是没有权限造成的。</span><a href=' https://stackoverflow.com/questions/47476105/error-starting-jobhistoryserver-on-cloudera-manager '><span>参考链接</span></a></p><p><span>问题3： 此角色的主机的运行状况为存在隐患。 以下运行状况测试存在隐患： 正在交换。 </span></p><p><a href=' https://cloud.tencent.com/developer/article/1078935 '><span>原理参考</span></a><span>  解决方案就是加大电脑内存，然后加大虚拟机内存。（PS:所以想学大数据，先装内存条吧，哈哈哈~）</span></p><p><span>解决后来张图：</span></p><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/12.png" referrerpolicy="no-referrer" alt="3UhoSP.png"></p><p><strong><span>上面将HDFS,Zookeeper和Yarn安装完了。接下来安装下Hive，oozie和hue，注意最后安装hue，因为hue会基于以前安装的内容渲染UI。</span></strong></p><h6><a name="安装hive" class="md-header-anchor"></a><span>安装Hive</span></h6><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/13.png" referrerpolicy="no-referrer" alt="3Bnvon.png"></p><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/14.png" referrerpolicy="no-referrer" alt="3Bnziq.png"></p><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/15.png" referrerpolicy="no-referrer" alt="3BupWV.png"></p><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/16.png" referrerpolicy="no-referrer" alt="3BuSJ0.png"></p><h6><a name="oozie简介" class="md-header-anchor"></a><span>oozie简介</span></h6><p><span>oozie是一个工作流，可以将多种任务拼接在一起自动执行。</span></p><p><span>oozie wordflow是作业操作的有向无环图。</span></p><p><span>oozie coordinator 作业由时间和数据触发的oozie workflow周期性作业。</span></p><h6><a name="安装oozie" class="md-header-anchor"></a><span>安装oozie</span></h6><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/17.png" referrerpolicy="no-referrer" alt="3Bn4II.png"></p><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/18.png" referrerpolicy="no-referrer" alt="3BnfZd.png"></p><h6><a name="oozie问题" class="md-header-anchor"></a><span>oozie问题</span></h6><p><span>首次打开页面可能会提示：</span></p><p><strong><span>Oozie web console is disabled.</span></strong></p><p><span>To enable Oozie web console install the Ext JS library.</span></p><p><span>Refer to </span><a href='http://master.bl.com:11000/oozie/docs/DG_QuickStart.html'><span>Oozie Quick Start</span></a><span> documentation for details.</span></p><p><span>解决方法：</span></p><p><span>下载</span><em><span>ext2.2.zip包</span></em></p><p><span>链接：</span><a href='https://pan.baidu.com/s/1VvzuFTA4eUsc2qe0AoFe6Q' target='_blank' class='url'>https://pan.baidu.com/s/1VvzuFTA4eUsc2qe0AoFe6Q</a><span> </span>
<span>提取码：lyff</span></p><p><span>放在/var/lib/oozie/ 下解压即可。</span></p><h6><a name="hue简介" class="md-header-anchor"></a><span>hue简介</span></h6><p><span>hue是大数据的一个图形界面工具。</span></p><h6><a name="安装hue" class="md-header-anchor"></a><span>安装hue</span></h6><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/19.png" referrerpolicy="no-referrer" alt="3BnhdA.png"></p><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/20.png" referrerpolicy="no-referrer" alt="3Bn2se.png"></p><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/21.png" referrerpolicy="no-referrer" alt="3BngMD.png"></p><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/22.png" referrerpolicy="no-referrer" alt="3BnIit.png"></p><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/23.png" referrerpolicy="no-referrer" alt="3Bnqsg.png"></p><h6><a name="impala简介" class="md-header-anchor"></a><span>impala简介</span></h6><p><span>针对hbase和hdfs的大数据进行查询，并基于hive的metastore进行找数据。它和hive相似，但是为了提高速度，用内存存储结果。</span></p><p><span>因为内存是有限的，所以一般impala和hive结合使用。</span></p><p>&nbsp;</p><h6><a name="安装impala" class="md-header-anchor"></a><span>安装impala</span></h6><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/24.png" referrerpolicy="no-referrer" alt="3Bnjds.png"></p><h6><a name="impala架构图" class="md-header-anchor"></a><span>impala架构图</span></h6><p><img src="https://bigdataimage-1259495827.cos.ap-beijing.myqcloud.com/ClouderaManagerImages/25.png" referrerpolicy="no-referrer"></p><p>&nbsp;</p><h6><a name="impala使用" class="md-header-anchor"></a><span>impala使用</span></h6><p><span>在控制台，使用impala-shell 进入，然后操作语句和Hive一样，使用SQL即可。</span></p><p><span>参考： </span><a href='https://www.w3cschool.cn/impala/impala_shell.html' target='_blank' class='url'>https://www.w3cschool.cn/impala/impala_shell.html</a><span> </span></p><p>&nbsp;</p><h6><a name="题外话" class="md-header-anchor"></a><span>题外话：</span></h6><p><span>当我上传博客到博客园时，因为我的博客是Markdown写的，为了方便上传，把图片都放到路过图床了，上传完毕后，我的图片居然都不显示，然后登陆路过图床排查原因，果然，上传的图片都失效了，包括之前的图片也不能看了，哎~ 免费没好货啊，担心的事情这么快就发生了，我想着图片怎么能用几年，这才几个月啊。我体会到要找活得长久的，技术好的公司的图床，要不没几年倒闭了或者图床被攻击了，你就哭去吧。最后我买了腾讯的对象存储，这个公司和技术不用质疑了，嗯！掏钱就行了，不过能买来心安也不错。 另外悟出来一点就是买公司产品，还是买大公司的好，小公司几天倒闭了，你的用户数据，财务数据怎么办？所以强者越强，弱者越弱，越弱越没人搭理，越强吸引的人才就多，公司产品就能做的越好，公司也就能做的越长久。</span></p></div>
</body>
</html>